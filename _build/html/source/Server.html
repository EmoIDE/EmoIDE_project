<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Server package &#8212; Emotional IDE  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="server-package">
<h1>Server package<a class="headerlink" href="#server-package" title="Permalink to this heading">¶</a></h1>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this heading">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="Server.Dashboard.html">Server.Dashboard package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Server.Dashboard.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="Server.Dashboard.html#module-Server.Dashboard.dashboard">Server.Dashboard.dashboard module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.bcolors"><code class="docutils literal notranslate"><span class="pre">bcolors</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.bcolors.BOLD"><code class="docutils literal notranslate"><span class="pre">bcolors.BOLD</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.bcolors.ENDC"><code class="docutils literal notranslate"><span class="pre">bcolors.ENDC</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.bcolors.FAIL"><code class="docutils literal notranslate"><span class="pre">bcolors.FAIL</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.bcolors.HEADER"><code class="docutils literal notranslate"><span class="pre">bcolors.HEADER</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.bcolors.OKBLUE"><code class="docutils literal notranslate"><span class="pre">bcolors.OKBLUE</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.bcolors.OKCYAN"><code class="docutils literal notranslate"><span class="pre">bcolors.OKCYAN</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.bcolors.OKGREEN"><code class="docutils literal notranslate"><span class="pre">bcolors.OKGREEN</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.bcolors.UNDERLINE"><code class="docutils literal notranslate"><span class="pre">bcolors.UNDERLINE</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.bcolors.WARNING"><code class="docutils literal notranslate"><span class="pre">bcolors.WARNING</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.capture_screen"><code class="docutils literal notranslate"><span class="pre">capture_screen()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.create_combined_dashboard"><code class="docutils literal notranslate"><span class="pre">create_combined_dashboard()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.create_dashboard"><code class="docutils literal notranslate"><span class="pre">create_dashboard()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.create_heatmap"><code class="docutils literal notranslate"><span class="pre">create_heatmap()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.create_heatmap_dashboard"><code class="docutils literal notranslate"><span class="pre">create_heatmap_dashboard()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.create_heatmap_gif"><code class="docutils literal notranslate"><span class="pre">create_heatmap_gif()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.get_df_in_time_range"><code class="docutils literal notranslate"><span class="pre">get_df_in_time_range()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.Dashboard.html#Server.Dashboard.dashboard.screenshot_img"><code class="docutils literal notranslate"><span class="pre">screenshot_img()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Server.Dashboard.html#module-Server.Dashboard">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Server.Hardware.html">Server.Hardware package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Server.Hardware.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Server.Hardware.E4.html">Server.Hardware.E4 package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Server.Hardware.E4.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Hardware.E4.html#server-hardware-e4-e4ss-old-client-module">Server.Hardware.E4.E4SS_old_client module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Hardware.E4.html#module-Server.Hardware.E4.E4_client">Server.Hardware.E4.E4_client module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Hardware.E4.html#module-Server.Hardware.E4">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Server.Hardware.EEG.html">Server.Hardware.EEG package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Server.Hardware.EEG.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Hardware.EEG.html#module-Server.Hardware.EEG.EEG">Server.Hardware.EEG.EEG module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Hardware.EEG.html#module-Server.Hardware.EEG">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Server.Hardware.Eyetracker.html">Server.Hardware.Eyetracker package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Server.Hardware.Eyetracker.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Hardware.Eyetracker.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Hardware.Eyetracker.html#module-Server.Hardware.Eyetracker.eyetracker">Server.Hardware.Eyetracker.eyetracker module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Server.Hardware.Eyetracker.html#module-Server.Hardware.Eyetracker">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Server.Hardware.html#module-Server.Hardware">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Server.ML.html">Server.ML package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Server.ML.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="Server.ML.html#module-Server.ML.ML_algorithms">Server.ML.ML_algorithms module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Server.ML.html#Server.ML.ML_algorithms.ML_dataframe"><code class="docutils literal notranslate"><span class="pre">ML_dataframe()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.ML.html#Server.ML.ML_algorithms.k_nearest_neighbors"><code class="docutils literal notranslate"><span class="pre">k_nearest_neighbors()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.ML.html#Server.ML.ML_algorithms.multilayer_perceptron"><code class="docutils literal notranslate"><span class="pre">multilayer_perceptron()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.ML.html#Server.ML.ML_algorithms.random_forest"><code class="docutils literal notranslate"><span class="pre">random_forest()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.ML.html#Server.ML.ML_algorithms.read_data"><code class="docutils literal notranslate"><span class="pre">read_data()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.ML.html#Server.ML.ML_algorithms.support_vector_machine"><code class="docutils literal notranslate"><span class="pre">support_vector_machine()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Server.ML.html#module-Server.ML.Pop_up">Server.ML.Pop_up module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Server.ML.html#Server.ML.Pop_up.get_age"><code class="docutils literal notranslate"><span class="pre">get_age()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.ML.html#Server.ML.Pop_up.get_gender"><code class="docutils literal notranslate"><span class="pre">get_gender()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.ML.html#Server.ML.Pop_up.get_name"><code class="docutils literal notranslate"><span class="pre">get_name()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.ML.html#Server.ML.Pop_up.get_stress"><code class="docutils literal notranslate"><span class="pre">get_stress()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.ML.html#Server.ML.Pop_up.test_arousal"><code class="docutils literal notranslate"><span class="pre">test_arousal()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Server.ML.html#Server.ML.Pop_up.test_valence"><code class="docutils literal notranslate"><span class="pre">test_valence()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Server.ML.html#server-ml-data-cleaning-module">Server.ML.data_cleaning module</a></li>
<li class="toctree-l2"><a class="reference internal" href="Server.ML.html#module-Server.ML">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading">¶</a></h2>
</section>
<section id="module-Server.main">
<span id="server-main-module"></span><h2>Server.main module<a class="headerlink" href="#module-Server.main" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="Server.main.get_e4_data">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">get_e4_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.get_e4_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an E4 connection and starts receiving data from the E4 device.</p>
<p>This function establishes a connection with the E4 device and starts receiving Bvp, Gsr, and Hr data
by initializing the ‘e4_data_dict’ and starting subscriptions. The calibration status is updated
in the ‘calibration_done’ dictionary. It then enters a loop to continuously receive data, extracting
the Hr, Bvp, and Gsr values. If the values are not empty, they are assigned to the corresponding keys
in ‘e4_data_dict’. The ‘Pulse’ value is converted to a float and checked against a threshold before
assigning it.</p>
<dl class="simple">
<dt>Notes:</dt><dd><ul class="simple">
<li><p>The function keeps executing while the ‘session_on’ flag is True.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.get_eye_tracker_data">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">get_eye_tracker_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.get_eye_tracker_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an EyeTracker object, establishes a connection to the Eye Tracker, and starts receiving data from it.</p>
<p>Starts recording eye tracker data by initializing the ‘eye_tracker’ object and setting up the eye tracker.
The ‘calibration_done’ dictionary is updated to indicate that the eye tracker calibration is complete.
It then enters a loop to wait until all sensor calibrations are done before starting the recording.
The eye data is continuously updated. Finally, the eye tracker recording is stopped.</p>
<dl class="simple">
<dt>Notes:</dt><dd><ul class="simple">
<li><p>The function keeps executing and updating the ‘eye_data_dict’ while the ‘session_on’ flag is True.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.import_EEG_data">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">import_EEG_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.import_EEG_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Establishes a connection to the EEG, and starts receiving data from it.</p>
<p>This asynchronouos function starts recording EEG data by initializing the api and setting up the api object.
The ‘calibration_done’ dictionary is updated to indicate that the EEG calibration is complete.
It then enters a loop to wait until all sensor calibrations are done before starting gathering data.
The EEG data is continuously updated. Finally, the EEG ends is session when ‘session_on’ flag is False.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>int: 0 if the cortex api setup fails.</p>
</dd>
<dt>Raises:</dt><dd><p>Exception: If any exception occurs during cortext setup</p>
</dd>
<dt>Notes:</dt><dd><ul class="simple">
<li><p>The function keeps executing and updating the ‘eeg_data_dict’ while the ‘session_on’ flag is True.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.init_df">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">init_df</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.init_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Initalizes the dataframe and creates all columns, along with the dictionaries used for updating the dataframe.</p>
<p>This function initializes the dataframe and dictionaries used for updating it. Global variables such as ‘time_dict’,
‘eye_data_dict’, ‘eeg_data_dict’, ‘e4_data_dict’, ‘prediction_dict’, ‘full_data_dict’, ‘full_df’,
and ‘training_dict’ are initialized. The ‘full_df’ is created as an empty DataFrame of object data type,
and the dictionaries are initialized with default values. The function updates ‘full_data_dict’ with
values from the dictionaries and appends it as the first row to the ‘full_df’ DataFrame.</p>
<dl class="simple">
<dt>Note:</dt><dd><ul class="simple">
<li><p>The commented code related to the ‘training_dict’ is currently disabled.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.join_threads">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">join_threads</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threads</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.join_threads" title="Permalink to this definition">¶</a></dt>
<dd><p>This function joins all the threads</p>
<p>This function will take the inputed list of threads and joining them while printing out
their names.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>threads (list): Inputed list of threads</p>
</dd>
<dt>Raises:</dt><dd><p>Exception: If any exception occurs. Will print “failed to join {thread_name}”</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.load_models">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">load_models</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.load_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the AI models and the dataset they were trained on</p>
<p>The function loads the Support Vector Machine (SVW) models for arousal and valence prediciton,
as well as the dataset used for training the models.</p>
<dl class="simple">
<dt>Notes:</dt><dd><ul class="simple">
<li><p>The fucntion uses the ‘joblib’ library to load the SVM models from the specified file paths.</p></li>
<li><p>The dataset is loaded using ‘pd.read_csv’ function.</p></li>
<li><p>The ‘svm_dataset’ DataFrame has an ‘Unnamed: 0’ column, which is dropped for further processing.</p></li>
<li><p>The loaded models and dataset are stored in the respective global variables: ‘svm_arousal’, ‘svm_valence’,
and ‘svm_dataset’.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.make_dashboard">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">make_dashboard</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.make_dashboard" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is responsible to create the dashboard</p>
<p>This function will create the combined dashboard from the current state of the
dataframe. This will be rendered as a jinja2 templated located in the folder:
{%projectPath}/Server/Dashboard/Saved_dashboard/combined_dashboard.html</p>
<dl class="simple">
<dt>Raises:</dt><dd><p>Exception: If any exception occurs. Will print “[ERROR] - dasboard failed”</p>
</dd>
<dt>Notes:</dt><dd><ul class="simple">
<li><p>This function uses the object “dashboard” which is an instande of the module
“Dashboard.dashboard” located in {%projectPath}/Server/Dashboard/dashboard.py</p></li>
<li><p>And uses the function create_combined_dashboard(full_df) from that instace.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.mock_all_dicts">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">mock_all_dicts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.mock_all_dicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Modifies and updates global dictionaries with mock data.</p>
<p>This function updates the global dictionaries eye_dat_dict, eeg_data_dict, e4_data_dict,
and prediciton_dict with randomly generate mock data.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.predict_series">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">predict_series</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">full_data_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.predict_series" title="Permalink to this definition">¶</a></dt>
<dd><p>Recieves the data from the full data dict, reformats it and changes the values in prediction
dict based on the predictions of the trained AI model</p>
<p>The function reads an SVM dataset from a CSV file, modifies certain fields in the data,
and assigns it to a global variable. It then performs preprocessing steps such as dropping
unnecessary fields, applying one-hot encoding, and scaling the dataset. Using an AI model,
the function predicts values for ‘Valence’ and ‘Arousal’ based on the scaled dataset,
storing the predictions in the ‘prediction_dict’ fields.</p>
<dl class="simple">
<dt>Notes:</dt><dd><ul class="simple">
<li><p>The ‘svm_dataset’ is read from a CSV file named ‘SVM_dataset.csv’ and modified by dropping the ‘Unnamed: 0’ column.</p></li>
<li><p>The scaled dataset is obtained using the ‘scale’ function.</p></li>
<li><p>If the random number is greater than 50, the predicted ‘Arousal’ value comes from the AI model; otherwise, a default value is used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.read_settings">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">read_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.read_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the settings from the specified JSON file.</p>
<p>Reads the contents of the JSON file located at the given settings_path
(should point to settings.json). Updates the global variable
settings_dict with the loaded settings.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>settings_path (str): The path to the JSON file containing the settings.</p>
</dd>
<dt>Raises:</dt><dd><p>FileNotFoundError: If the specified JSON file is not found.
JSONDecodeError: If the JSON file is invalid or cannot be parsed.</p>
</dd>
<dt>Notes:</dt><dd><ul class="simple">
<li><p>The JSON file must follow a valid JSON format.</p></li>
<li><p>The settings_dict global variable is updated with the loaded settings.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.save_df">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">save_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_as_ext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.csv'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.save_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the dataframe</p>
<p>The function saves the DataFrame to a file at the given path with the specified file extension.
The file format options includes the following: [CSV, PDF, TSV, HTML, ODS, XLSX].</p>
<dl class="simple">
<dt>Args:</dt><dd><p>df (pandas.DataFrame): The DataFrame to be saved.
path (str): The path where the file should be saved.
save_as_ext (str, optional): The desired file extension. Defaults to ‘.csv’.</p>
</dd>
<dt>Returns:</dt><dd><p>int: 0 if the path does not exist.</p>
</dd>
<dt>Notes:</dt><dd><ul class="simple">
<li><p>The ‘filename’ is detemined by appending the ‘full_data_dict[“time”]’</p></li>
<li><p>The file formats supported are: CSV, PDF, TSV, HTML, ODS, and XLSX.</p></li>
<li><p>The function uses the module matplotlib.pyplot as ‘plt’ to save as pdf</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.setup_server">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">setup_server</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.setup_server" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the server-side with a TCP socket.</p>
<p>Creates a TCP socket using the IPv4 address family (AF_INET) and TCP stream type (SOCK_STREAM).
Binds the socket to the specified host IP address and port number. Listens for incoming connections
and then starts a TCP thread to handle incoming connections and communication.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>tcp_thread (Thread): The thread responsible for handling TCP communication.</p>
</dd>
<dt>Notes:</dt><dd><ul class="simple">
<li><p>AF = Address Family (IPv4)</p></li>
<li><p>Sock_stream = type (TCP)</p></li>
<li><p>Creates TCP thread using function ‘start_tcp_thread()’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.start_eeg">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">start_eeg</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.start_eeg" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the EEG recorder.</p>
<p>This function executes the function ‘import_EEG_data()’ within an asyncio event loop. This
function starts the process of importing EEG data.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.start_heatmap">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">start_heatmap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.start_heatmap" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the heatmap thread</p>
<p>This thread is used to continously take screenshots of the monitor in an interval
and save them as a heatmap for the dashboard to use.</p>
<dl class="simple">
<dt>Notes:</dt><dd><ul class="simple">
<li><p>This function uses the object “dashboard” which is an instande of the module
“Dashboard.dashboard” located in {%projectPath}/Server/Dashboard/dashboard.py</p></li>
<li><p>And uses the function screenshot_img(capture_name) and create_heatmap_gif(img_cache, df)
from that instace.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.start_session_threads">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">start_session_threads</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.start_session_threads" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts threads that are active during a session</p>
<p>This function is called if the session starts and is responsible to start all the active threads.
It starts the threads required for EEG, Eye tracker, Emaptica E4, and updating the dataframe.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>list: A list of the started thread objects</p>
</dd>
<dt>Examples:</dt><dd><p>threads = start_session_threads()
# Output: [eeg_thread, eye_thread, heatmap_thread, e4_thread, df_thread]</p>
</dd>
<dt>Notes:</dt><dd><ul class="simple">
<li><p>The function checks the “settings_dict” dictionary to determine which threads to start based
on the active devices.</p></li>
<li><p>If a device is not active, the corresponding “calibration_done” flag is set to True.</p></li>
<li><p>This function uses the “threading” module to create threads</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.start_tcp_thread">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">start_tcp_thread</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.start_tcp_thread" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts a thread for the tcp communication</p>
<p>This thread is on of the elementary functions which handles creating the TCP communication
between the server and the extension. This further allows commands to be sent between the
extension and the server.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>Thread: The thread handling the tcp communication</p>
</dd>
<dt>Notes:</dt><dd><ul class="simple">
<li><p>This function uses the “tcp_communication()” function to use as a target for the thread</p></li>
<li><p>This function uses the “threading” module to create threads</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.tcp_communication">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">tcp_communication</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.tcp_communication" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles TCP communication (connection) between the server and the extension.</p>
<p>Waits for the extension to establish a connection with the server.
Receives messages from the extension, processes them accordingly, and sends responses back if necessary.
Handles commands such as “settings_update”, “get_emotion”, “toggle_session”, “disconnect”, “ping”, and “getPulse”.
Manages the session state and performs actions based on the received commands.</p>
<dl class="simple">
<dt>Raises:</dt><dd><p>Exception: If any exception occurs during socket connection between server and extension (if extension is not connected) .
Exception: If any exception occurs during socket recieving data (if extension is connected).</p>
</dd>
<dt>Notes:</dt><dd><ul class="simple">
<li><p>The function keeps executing and checking for socket connection if not connected to extension.</p></li>
<li><p>The function keeps executing and checking for recieved data if it’s connected to the extension.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Server.main.update_dataframe">
<span class="sig-prename descclassname"><span class="pre">Server.main.</span></span><span class="sig-name descname"><span class="pre">update_dataframe</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Server.main.update_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects and updates data in the global dataframe.</p>
<p>This function continuously collects data from various sources such as, eye_data_dict,
time_dict, eeg_data_dict, e4_data_dict, and prediction_dict and updates the dataframe
which is then appended to the global ‘full_df’ DataFrame.</p>
<dl class="simple">
<dt>Raises:</dt><dd><p>Exception: If any exception occurs while calling ‘predict_series(full_data_dict)’</p>
</dd>
<dt>Notes:</dt><dd><ul class="simple">
<li><p>The function keeps executing while the ‘session_on’ flag is True.</p></li>
<li><p>The function sets the ‘calibration_done’ flag for the ‘Dataframe’ key to True.</p></li>
<li><p>It retrieves mock data if the ‘mock’ flag is set to True instead of real data.</p></li>
<li><p>The terminal is cleared using OS-specific commands (‘cls’ for Windows and ‘clear’ for other systems).</p></li>
<li><p>If an exception occurs during the prediction process, a message is printed indicating the failure.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-Server">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-Server" title="Permalink to this heading">¶</a></h2>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Emotional IDE</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Group 3.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/source/Server.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>